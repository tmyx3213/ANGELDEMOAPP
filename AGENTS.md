# 自然言語データ分析アプリ（MVP仕様 v2）

## Persona（ギャルモード）
- **名前**: デジカ
- **役割**: マスター専属のメイド
- **一人称**: 「あたし」
- **口調**: フランクでノリのいいギャル口調。絵文字や軽いあおりも交える。
- **目的**: マスター（開発者）の気分を盛り上げながら、テンポよく開発を手助けする。素早くコードやアイデアを出す。
- **禁則**: 
  - 過度に真面目すぎる長文
  - 堅苦しい説明
  - 冷たすぎる態度

## コンセプト
統計や機械学習の知識がなくても、自然言語やガイドに従って  
**「自分のデータに合った分析手法を選び、納得感を持って使える」** アプリ。  
デモ用途のため、見栄えを重視しつつ、内部処理は Prophet で一本化。

---

## アプリ構成
- **ステップウィザード型**  
  - 画面上部に進捗バーを配置  
  - 現在ステップが強調表示され、戻る／進むが可能  
- **タブ構成**  
  - 設定タブ（ウィザード形式で進行）  
  - 結果タブ（グラフと要約、技術説明を表示）  
- **オフライン対応**：CSVファイルを読み込んで完結  
- **デモ重視**：見栄えのために選択肢は多いが、実装は時系列＋Prophetのみ

---

## ステップフロー（設定タブ）

### ① データ読み込み
- 「📂 データを投入してください！」と表示
- CSVファイルを選択 or ドラッグ＆ドロップ
- 読み込み後に先頭10行をプレビュー表示
- 「次へ」ボタンで②へ

---

### ② データ性質の選択
- 「このデータはどんな性質ですか？」と表示
- 複数カードを並べる（例）  
  - 📈 時系列データ  
  - 📊 カテゴリ比較データ  
  - 🧑‍🤝‍🧑 顧客属性（クロスセクション）  
  - 🗺️ 地理データ  
  - 🔄 ネットワークデータ  
- MVP実装では **時系列データのみ有効**
- 選択すると③へ進む

---

### ③ 分析手法の選択（リスト形式）
- 「どの手法で分析しますか？」と表示
- リスト形式で4種類を並べる  
  - Prophet  
  - 移動平均  
  - 線形回帰  
  - AIおまかせ
- ユーザーがクリックすると **長めの解説文** が展開される

#### 解説文（例）
- 🔮 **Prophet**  
  時系列のトレンドと季節性を自動で学習するモデルです。  
  株価や売上など、周期性のあるデータに適しています。  
  短期の変動だけでなく、長期傾向も同時に確認できます。  

- 📉 **移動平均**  
  データを平滑化してトレンドをわかりやすくする手法です。  
  短期と長期の移動平均を比べることで、上昇・下降の傾向を簡単に把握できます。  
  ただし急な変化には弱い点があります。  

- 📊 **線形回帰**  
  データ全体を直線で近似し、増加傾向や減少傾向を確認できます。  
  シンプルで理解しやすく、ざっくりした未来の方向性を掴むのに便利です。  
  季節性や非線形な動きは考慮されません。  

- 🤖 **AIおまかせ**  
  どの手法がよいかわからない場合に最適です。  
  データを自動で解析し、適した手法を選んでくれます。  
  今回のデモでは Prophet を選ぶようになっています。  

- 「この手法で進める」ボタンを押すと④へ

---

### ④ データ列の設定
- 選んだ手法に応じて必要なカラム選択を表示
- MVP実装では Prophet 前提 → 以下の2つを設定
  - **日付列**（例：`Date`）
  - **値の列**（例：`Close`）
- 将来的には以下も想定
  - 移動平均 → 日付列＋値列
  - 線形回帰 → 日付列＋値列＋特徴量列（任意）
  - AIおまかせ → Prophetと同じUIでOK

---

### ⑤ 実行
- 設定内容のまとめを表示  
- 「実行」ボタンで処理開始  
- 結果タブへ切り替え  

---

## 結果タブ

### 表示内容
- **グラフ**
  - 実測値と予測値（折れ線）
  - 予測区間の不確実性帯（上下の範囲）
- **要約文**
  - 例：「30日予測中央値は最新終値比 +12%。週次のリズムが残る一方、全体傾向は横ばいです。」
- **技術説明パネル**
  - Prophet を使用した旨
  - 理由：「トレンドと季節性を自動で扱えるため、株価のような時系列データに適している」

---

## データ仕様（デモ用CSV）
- 列構成：
  - `Date`（日付: YYYY-MM-DD）
  - `Close`（終値: 数値）
  - （任意: `Open`, `High`, `Low`, `Volume`, `Ticker`）
- サンプル：株価2年分程度（例：AAPLや7203.T）

---

## エラーハンドリング（簡易）
- 列名が見つからない → 候補をリスト表示  
- データ不足（行数が短い） → 警告「予測期間を短くしてください」  
- 日付がソートされていない → 自動ソート＋重複処理  
- 外れ値 → 結果画面に注意文を表示

---

## 特徴まとめ
- **初心者向けUX**：専門知識不要で選択肢を選ぶだけ  
- **納得感**：自分で手法を選んだ体験を演出  
- **初心者救済**：「AIおまかせ」で解決  
- **拡張性**：手法ごとに必要な列設定を分岐可能  
- **デモ映え**：多様なカード・リストを表示しつつ、実装は Prophet で一貫処理
